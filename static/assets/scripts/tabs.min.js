function reload(){const e=document.getElementById("iframe-container"),t=Array.from(e.querySelectorAll("iframe")).find((e=>e.classList.contains("active")));t.src=t.src}function expand(){const e=document.getElementById("iframe-container");Array.from(e.querySelectorAll("iframe")).find((e=>e.classList.contains("active"))).requestFullscreen()}function goBack(){const e=document.getElementById("iframe-container");Array.from(e.querySelectorAll("iframe")).find((e=>e.classList.contains("active"))).contentWindow.history.back()}function goForward(){const e=document.getElementById("iframe-container");Array.from(e.querySelectorAll("iframe")).find((e=>e.classList.contains("active"))).contentWindow.history.forward()}function erudaToggle(){const e=document.getElementById("iframe-container"),t=Array.from(e.querySelectorAll("iframe")).find((e=>e.classList.contains("active"))),a=t.contentWindow,n=t.contentDocument;if(a&&n)if(a.eruda?._isInit)a.eruda.destroy();else{let e=n.createElement("script");e.src="https://cdn.jsdelivr.net/npm/eruda",e.onload=function(){a&&(a.eruda.init(),a.eruda.show())},a.document?.head?.appendChild(e)||n.head.appendChild(e)}}document.addEventListener("DOMContentLoaded",(function(e){const t=document.getElementById("add-tab"),a=document.getElementById("tab-list"),n=document.getElementById("iframe-container");let o=1;function r(e){const t=e.target.closest("li").dataset.tabId;Array.from(a.querySelectorAll("li")).forEach((e=>e.classList.remove("active")));Array.from(n.querySelectorAll("iframe")).forEach((e=>e.classList.remove("active")));const o=a.querySelector(`[data-tab-id='${t}']`);o?o.classList.add("active"):console.log("No selected tab found with ID:",t);const r=n.querySelector(`[data-tab-id='${t}']`);r?r.classList.add("active"):console.log("No selected iframe found with ID:",t)}t.addEventListener("click",(()=>{const e=document.createElement("li"),t=document.createElement("span"),i=document.createElement("iframe");t.textContent="New Tab",t.className="tab-title",e.dataset.tabId=o,e.addEventListener("click",r),e.setAttribute("draggable",!0);const c=document.createElement("button");c.classList.add("close-tab"),c.innerHTML="&#10005;",c.addEventListener("click",(t=>{t.stopPropagation();const o=a.querySelector(`[data-tab-id='${e.dataset.tabId}']`),r=n.querySelector(`[data-tab-id='${e.dataset.tabId}']`);if(o&&r){const e=parseInt(o.dataset.tabId);o.remove(),r.remove();const t=Array.from(a.querySelectorAll("li"));if(t.length>0){let a=t.findIndex((t=>parseInt(t.dataset.tabId)>e));-1===a&&(a=t.length-1);const o=t[a],r=n.querySelector(`[data-tab-id='${o.dataset.tabId}']`);o&&r&&(o.classList.add("active"),r.classList.add("active"))}}})),e.appendChild(t),e.appendChild(c),a.appendChild(e);Array.from(a.querySelectorAll("li")).forEach((e=>e.classList.remove("active")));Array.from(n.querySelectorAll("iframe")).forEach((e=>e.classList.remove("active"))),e.classList.add("active"),i.src="/",i.dataset.tabId=o,i.classList.add("active"),n.appendChild(i),i.addEventListener("load",(()=>{const e=i.contentDocument.title;t.textContent=e})),o++})),window.addEventListener("message",(function(e){if(e.origin!==window.location.origin)return void console.warn("Received message from unexpected origin:",e.origin);if(console.log("Received message:",e.data),e.data&&e.data.url){Array.from(n.querySelectorAll("iframe"))}else console.log("No URL data in the message.");const t=iframes.find((e=>e.classList.contains("active")));if(t){console.log("Visible iframe:",t);const n=a.querySelector(`[data-tab-id='${t.dataset.tabId}']`);if(n){console.log("Tab to update:",n);const t=n.querySelector(".tab-title");t?(console.log("Tab title:",t),t.textContent=e.data.url,console.log("Hostname:",e.data.url)):console.log("No tab title element found.")}else console.log("No tab to update found.")}else console.log("No visible iframe found.")}));let i=null;a.addEventListener("dragstart",(e=>{i=e.target})),a.addEventListener("dragover",(e=>{e.preventDefault();const t=e.target;if("LI"===t.tagName&&t!==i){Array.from(a.children).indexOf(t)<Array.from(a.children).indexOf(i)?a.insertBefore(i,t):a.insertBefore(i,t.nextSibling)}})),a.addEventListener("dragend",(()=>{i=null}))}));